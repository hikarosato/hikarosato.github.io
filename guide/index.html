<!DOCTYPE html>
<html lang="uk">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Створення українізатора 2.0</title>
	<meta name="title" content="Створення українізатора 2.0">
	<meta name="description" content="Авторський посібник по створенню українізатора.">
	<meta property="og:title" content="Створення українізатора 2.0">
	<meta property="og:description" content="Авторський посібник по створенню українізатора.">
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://hikarosato.github.io/guide/">
	<meta property="og:image" content="https://hikarosato.github.io/guide/assets/cover.png">
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Створення українізатора 2.0">
	<meta name="twitter:description" content="Авторський посібник по створенню українізатора.">
	<meta name="referrer" content="no-referrer-when-downgrade">
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
	--width: 98%;
	--font-main: 'Inter', sans-serif;
	--font-secondary: 'Inter', sans-serif;
	--font-scale: 1.1em;
    --background-color: #fff;
    --heading-color: #222;
    --text-color: #444;
    --link-color: #3273dc;
    --visited-color:  #8b6fcb;
    --code-background-color: #f2f2f2;
    --code-color: #222;
    --blockquote-color: #222;
}

body {
	font-family: var(--font-secondary);
	font-size: var(--font-scale);
	margin: 0;
	background-color: var(--background-color);
	word-wrap: break-word;
	overflow-wrap: break-word;
	color: var(--text-color);
}

/* Верхнє меню */
nav {
	position: fixed;
	top: 0;
	left: 0;
	background: rgba(0,0,0,.09);
	display: flex;
	align-items: center;
	width: 100%;
	height: 80px;
	z-index: 999;
	backdrop-filter: blur(5px);
	-webkit-backdrop-filter: blur(5px);
}

nav p {
	width: 50%;
	padding: 0 20px;
	margin: 0 auto;
}

nav a {
	margin-right: 15px;
	font-size: 0.9em;
	color: var(--link-color);
	text-decoration: none;
}

nav a:hover { text-decoration: underline; }

/* Сітка сторінки */
.page {
	display: grid;
	grid-template-columns: 220px 1fr;
	gap: 20px;
	max-width: var(--width);
	margin: 100px auto 50px auto; /* відступ після fixed nav */
	padding: 0 20px;
}

@media (max-width: 900px) {
  .page {
    grid-template-columns: 1fr;
    padding: 0 10px;
  }
  nav {
    height: auto;
    flex-wrap: wrap;
    padding: 10px;
  }
  nav p {
    width: 100%;
    text-align: center;
    padding: 5px 0;
  }
}

/* Sidebar */
.sidebar {
	padding: 10px;
	background: rgba(0,0,0,0.05);
	border-radius: 10px;
	height: fit-content;
	position: sticky;
	top: 100px;
	align-self: start;
}

.sidebar ul {
	list-style: none;
	padding: 0;
	margin: 0;
}

.sidebar li { margin: 10px 10px; }

.sidebar a {
	color: var(--link-color);
	text-decoration: none;
	font-weight: bold;
}

.sidebar a:hover { text-decoration: none; }

.submenu { display: none; }

.menu-item.open > .submenu { display: block; }

.menu-link {
	cursor: pointer;
	font-weight: bold;
	display: block;
}

.submenu li a {
	display: block;
	font-weight: bold;
}

/* Контент */
h1, h2, h3, h4, h5, h6 {
	font-family: var(--font-main);
	color: var(--heading-color);
}

h1[id] { scroll-margin-top: 130px; }

h2[id] { scroll-margin-top: 100px; }

h3[id],h4[id] { scroll-margin-top: 100px; }

html { scroll-behavior: smooth; }

strong, b { color: var(--heading-color); }

a { color: var(--link-color); cursor: pointer; text-decoration: none; }

a:hover { text-decoration: underline; }

table { width: 100%; }

hr { border: 0; border-top: 1px dashed; }

img { max-width: 100%; }

code {
	font-family: monospace;
	background-color: var(--code-background-color);
	color: var(--code-color);
	border-radius: 10px;
	padding: 10px 20px;
	display: inline-block;
	white-space: pre-wrap;
}

code, pre, .highlight {
  max-width: 100%;
  overflow-x: auto;
  display: block;
  box-sizing: border-box;
}

blockquote {
	border-left: 1px solid #999;
	color: var(--code-color);
	padding-left: 20px;
	font-style: italic;
}

footer {
	padding: 25px 0;
	text-align: center;
}

button {
	border: 0;
	background-color: inherit;
	text-decoration: underline;
	color: var(--heading-color);
}

.title { text-decoration: none; }

.title h1 { color: var(--link-color); }

.highlight, .code {
	padding: 1px 15px;
	background-color: var(--code-background-color);
	color: var(--code-color);
	border-radius: 3px;
	margin-block-start: 1em;
	margin-block-end: 1em;
	overflow-x: auto;
}

/* Для швидкого виділення */
.copy-box {
  user-select: all;
  cursor: pointer;
}

main {
	line-height: 1.4;
}

img, video {
  max-width: 100%;
  height: auto;
}
</style>
</head>
<body>
	<nav>
		<p><b>
			<a href="/">Main page</a>
		</b></p>
	</nav>
	<div class="page">
		<aside class="sidebar">
			<ul>
				<li><a href="#start">Вступ</a></li>
				<li class="menu-item">
					<a href="#unity" class="menu-link">Unity</a>
					<ul class="submenu">
						<li><a href="#unity-text">Текст</a></li>
						<li><a href="#unity-catalog">.Bundle</a></li>
						<li><a href="#unity-font">Шрифт</a></li>
					</ul>
				</li>
				<li class="menu-item">
					<a href="#ue4-5" class="menu-link">Unreal Engine 4-5</a>
					<ul class="submenu">
						<li><a href="#ue-aes">AES та .sig</a></li>
						<li><a href="#ue-text">Текст</a></li>
						<li><a href="#ue-unpack">Розпакування</a></li>
						<li><a href="#ue-font">Шрифт</a></li>
						<li><a href="#ue-pack">Пакування</a></li>
					</ul>
				</li>
				<li><a href="#tips">Поради</a></li>
			</ul>
		</aside>
		<main>
			<h1 id="start" style="text-align: center; margin: 0; color: #3273dc;">Створення українізатора 2.0</h1>
				<p style="text-indent: 1em;">Цей посібник створений як розширення <b><a target="_blank" href="https://ukrainizer.netlify.app">посібника piggsy</a></b>. Він не дублює інформацію, а пропонує додаткові роз’яснення, приклади та нові інструменти. Рекомендується ознайомитися з <b>обома</b> посібниками. Усе, що описано в цьому посібнику, засноване на власному досвіді автора.
				<br>Подякувати автору: <b><a target="_blank" href="https://send.monobank.ua/jar/47CywvjmpG">monobank</a></b>
				<br>Telegram: <b><a target="_blank" href="https://t.me/Halytskyi_Rozbyshaka">Галицький Розбишака</a></b>
				<br>Discord: <b class="copy-box" style="color:#3273dc;">.hikaro</b></p>
			<h2 id="unity">Unity</h2>
			<h3 id="unity-text">Текст</h3>
					<p>Експортуйте і працюйте завжди з <b>JSON</b>, його простіше обслуговувати, простіше парсити, простіше знаходити зламані рядки.</p>
				<h4>> Види JSON:</h4>
					<ul>
						<li>
							<h4>Весь текст в одному рядку</h4>
							<p>Використовуйте онлайн-конвертер <b><a target="_blank" href="https://www.convertcsv.com/json-to-csv.htm">JSON to CSV</a></b>.</p>
								<img src="unity/text-1.png" width="900" style="display: block; margin: 0 auto;" alt="">
							<p style="text-indent: 1em;">Для перетворення <b>.csv</b> назад в <b>.json</b> використовуйте онлайн-конвертер <b><a target="_blank" href="https://www.convertcsv.com/csv-to-json.htm">CSV to JSON</a></b>. Приберіть зайві <b>[ ]</b>, які встановлюються за замовчуванням, вони не потрібні.</p>
								<img src="unity/text-1-1.png" width="400" style="display: block; margin: 0 auto;" alt="">
							<p>❗️ <b>Зверніть увагу:</b> онлайн-конвертер зберігає <b>.json</b> не з <b>\r\n</b>, як це інколи буває в оригіналі, а лише з <b>\n</b>. Через цю дрібницю у мене траплялися баги з діалогами в одній з ігор. Виправити це можна за допомогою <b>Notepad++</b>: відкрийте всі ваші конвертовані <b>.json</b> і замініть потрібні символи.</p>
								<img src="unity/text-1-2.png" width="500" style="display: block; margin: 0 auto;" alt="">
						</li>
						<li>
							<h4>Багатомовні масиви</h4>
							<p style="text-indent: 1em;">Використовуйте авторський інструмент <b><a target="_blank" href="https://hikarosato.github.io/array/">Array Localization Tool</a></b>, який підтримує чотири види подібних масивів. Перекладайте текст прямо в програмі або експортуйте в <b>CSV</b> для перекладу деінде.</p>
								<div style="display: flex; gap: 10px; justify-content: center; align-items: flex-start; flex-wrap: wrap;">
									<img src="unity/text-2.png" style="max-width: 300px; height: auto;" alt="">
									<img src="unity/text-2-1.png" style="max-width: 700px; height: auto;" alt="">
								</div>
						</li>
						<li>
							<h4>Файли з однієї мовою з .bundle</h4>
							<p style="text-indent: 1em;">Підтримка таких файлів додана у <b>2.9</b> версії <b><a target="_blank" href="https://hikarosato.github.io/array/">Array Localization Tool</a></b>.</p>
									<img src="unity/text-4.png" width="250" style="display: block; margin: 0 auto;" alt="">
						</li>
					</ul>
				<h4>> Імпорт</h4>
					<p>❗️ <b>Увага:</b> Якщо ви використовуєте <b><a target="_blank" href="https://github.com/nesrak1/UABEA">UABEA</a></b> для роботи з .assets та .bundle <b>Unity</b>, майте на увазі: в програми є баг, через який <b>.json</b> може імпортуватися <b>некоректно</b> з першого разу. Завжди перевіряйте файл за допомогою кнопки <b>View Data</b>. Якщо з’являється повідомлення <b>Asset failed to deserialize</b> — повторіть імпорт <b>.json</b>.</p>
						<img src="unity/text-3.png" width="600" style="display: block; margin: 0 auto;" alt="">
					<p style="text-indent: 1em;">Новий інструмент <b><a target="_blank" href="https://github.com/nesrak1/UABEANext">UABEANext</a></b> позбавлений цієї проблеми — імпортування завжди проходить успішно. Проте програма досі в розробці.</p>
				<h3 id="unity-catalog">.Bundle та catalog.json</h3>
					<p style="text-indent: 1em;">Для роботи з файлами <b>.bundle</b> краще користуйтеся <b><a target="_blank" href="https://github.com/nesrak1/UABEANext">UABEANext</a></b>, попри його тимчасові недоліки, адже <b>UABEA</b> має проблеми з новими версіями формату Unity-асетів.</p>
					<p style="text-indent: 1em;">Для патчингу <b>catalog.json</b> використовуйте покращений мною інструмент <b><a target="_blank" href="https://github.com/hikarosato/CatalogTool">CatalogTool</a></b>, у якому виправлено роботу з бандлами, що містять символи <b>#</b> у назвах, та додано функцію <b>Drag & Drop</b> для зручного патчингу без ручного введення шляху.</p>
					<p style="text-indent: 1em;">Це консольна утиліта, просто перетягніть <b>catalog.json</b> на <b>.exe</b> програми.</p>
				<h3 id="unity-font">Шрифт</h3>
					<p style="text-indent: 1em;">Для редагування оригінальних <b>.ttf</b> або <b>.otf</b> шрифтів можна використовувати <b>FontLab</b>, <b>FontForge</b> або <b>FontCreator</b>.</p>
					<p style="text-indent: 1em;">Для зручного об’єднання згенерованих гліфів <b>TMP/2D</b> шрифтів з оригінальними <b>MonoBehaviour</b> використовуйте авторську програму <b><a target="_blank" href="https://hikarosato.github.io/atlas/">Atlas MonoBehaviour Merger</a></b>. Підтримується <b>.json</b> та <b>.txt</b> розширення <b>MonoBehaviour</b> файлу.</p>
				<hr>
			<h2 id="ue4-5">Unreal Engine 4 & 5</h2>
				<h3 id="ue-aes">AES захист та .sig файл</h3>
					<p>Для швидкого пошуку AES-ключа зручно користуватися сайтом <b><a target="_blank" href="https://illusory.dev/aesdumpster/">AES Dumpster</a></b>.</p>
						<img src="ue/aes.png" width="600" style="display: block; margin: 0 auto;" alt="">
					<p style="text-indent: 1em;">Якщо у вашій грі використовується <b>AES</b>-захист разом із <b>.sig</b> файлами у теці <b>Paks</b>, скористайтеся інструментом <b><a target="_blank" href="https://github.com/rm-NoobInCoding/UniversalSigBypasser">Unreal Engine Signature Check Bypasser</a></b> (один з авторів українець). Його потрібно розпаковувати у теку <b>Binaries/Win64</b> поряд з <b>.exe</b>, так, <u>обидва</u> <b>.dll</b> та <b>.asi</b>.</p>
					<p>Якщо на вашій грі це не спрацювало, створіть <b>issue</b> в репозиторії авторів щодо цього.</p>
						<img src="ue/sig.png" width="300" style="display: block; margin: 0 auto;" alt="">
					<p style="text-indent: 1em;">Це дозволить завантажувати сторонні <b>.pak</b> файли грою без необхідності ручного прописування <b>-fileopenlog</b> у «Параметрах запуску» властивостей гри в <b>Steam</b>.</p>
					<p>❗️ <b>Не забудьте додати .dll та .asi файли у архів разом із перекладом для решти гравців.</b>  ❗️</p>
				<h3 id="ue-text">Текст</h3>
					<p style="text-indent: 1em;">Для перекладу та роботи з <b>.locres</b> файлами використовуйте покращену мною версію <b><a target="_blank" href="https://github.com/hikarosato/UE4LocalizationsTool">UE Localization Tool</a></b>. Для об’єднання перекладу з новим <b>.locres</b> після оновлення гри використовуйте авторську <b><a target="_blank" href="https://github.com/hikarosato/CSV-Merger-Tool">CSV Merger Tool</a></b>.</p>
					<p style="text-indent: 1em;">Також підходить для перекладу <b>.uasset</b> та <b>.umap</b> файлів (Пункт меню програми <b>Налаштування — Підтримка .uasset/.umap</b> — Відкрити бажаний <b>.uasset/.umap</b>.), при умові, що вони <b><u>не</u></b> захищені <b>.usmap</b> ключем.</p>
					<p>❗️ <b>Не намагайтеся перекладати захищені <b>.uasset/.umap</b>, ви отримаєте неповний текст та <u>пошкодите</u> файл при збереженні. ❗️</b><br><i>UPD: В останніх версіях <b>UE Localization Tool</b> (2.8.4) було виправлено виявлення тексту, тепер його можна безпечно використовувати для перекладу <b>.uasset</b>.</i></p>
				<h4>Як дізнатись, чи .uasset/.umap захищені .usmap ключем:</h4>
					<p style="text-indent: 1em;">Спробуйте відкрити <b>.uasset/.umap</b> у <b><a target="_blank" href="https://github.com/4sval/FModel">FModel</a></b> для попереднього перегляду. Якщо з’явиться повідомлення <b>...mapping file is missing</b>, вітаю, вам потрібен <b>.usmap</b>.</p>
						<img src="ue/check-usmap.png" width="1200" style="display: block; margin: 0 auto;" alt="">
				<h4>Як дістати .usmap:</h4>
					<p>Вам потрібен <b><a target="_blank" href="https://github.com/Encryqed/Dumper-7">Dumper-7</a></b> та <b>DLL Injector</b>.</p>
						<video width="1000" style="display: block; margin: 0 auto;" controls><source src="ue/usmap-extract.mp4" type="video/mp4">Ваш браузер не підтримує відтворення відео.</video>
					<p style="text-indent: 1em;">Як тільки побачите текст <b>Generating SDK tools (*.*ms)</b> можете закривати Командний рядок, при цьому гра також закриється.
					<br>Згенерований <b>.usmap</b> знайдете на системному диску у теці <b>Dumper-7</b>.</p>
				<h3 id="ue-unpack">Правильне розпакування .uasset/.umap разом з .uexp</h3>
					<p  style="text-indent: 1em;">У вас при <b>Export Data Raw</b> в <b>FModel</b> експортується <b>.uasset/.umap</b> без <b>.uexp</b>? Вітаю, у вас <b><a target="_blank" href="https://dev.epicgames.com/documentation/en-us/unreal-engine/zen-loader-in-unreal-engine">Zen-контейнери</a></b>.
					<br>Для роботи з ними потрібен <b><a target="_blank" href="https://github.com/trumank/retoc">retoc</a></b>.</p>
					<p>Шаблон команди для експорту потрібного файлу:</p>
					<code>retoc --aes-key ВАШ_КЛЮЧ to-legacy --filter "/YourGame/Content/Some/Path/ФАЙЛ.uasset" "C:\Path\To\Game\Content\Paks" "C:\Path\To\OutputDir"</code>
					<p><b>--aes-key</b> можна не використовувати, якщо ваша гра його немає.</p>
					<p>У моєму випадку з <b>Life is Strange: Double Exposure</b> команда виглядає ось так:</p>
					<code>retoc to-legacy --filter "/Chronos/Content/Data/Localization" "E:\Games\Life is Strange - Double Exposure\Chronos\Content\Paks" "C:\Extract"</code>
						<img src="ue/retoc.png" width="600" style="display: block; margin: 0 auto;" alt="">
				<h4>Правильний переклад захищених .uasset/.umap:</h4>
					<p>Раніше ми дістали <b>.usmap</b> з гри, тепер дістали <b>.uasset+.uexp</b>. Далі потрібен <b><a target="_blank" href="https://github.com/atenfyr/UAssetGUI">UAssetGUI</a></b>, відкриваємо програму та імпортуємо наш <b>.usmap</b>.</p>
						<img src="ue/uassetgui.png" width="400" style="display: block; margin: 0 auto;" alt="">
					<p>Після чого обираємо в правому куті програми наш <b>.usmap</b> зі списку, та версію рушія (її ми дізнались при інджекті <b>.dll</b>)</p>
						<img src="ue/uassetgui-2.png" width="250" style="display: block; margin: 0 auto;" alt="">
					<p>Після всіх дій відкриваємо наш <b>.uasset</b>:</p>
						<img src="ue/uassetgui-3.png" width="1100" style="display: block; margin: 0 auto;" alt="">
					<p style="text-indent: 1em;">Я <b>не рекомендую</b> перекладати текст прямо в <b>UAssetGUI</b>. По-перше, в рядку англійського тексту постійно потрібно змінювати значення стовпця <b>Variant</b> з <b>us-ascii</b> на <b>utf-16</b> для підтримки кирилиці (інакше при збереженні і повторному відкритті <b>.uasset</b> у вас буде <b>????????</b> замість тексту). По-друге, це неефективна та марудна робота.</p>
					<p style="text-indent: 1em;">Для зручнішого перекладу натисніть <b>File</b> — <b>Save As</b> оберіть внизу Тип файлу<b> .json</b> та збережіть. У такому виді файлу не потрібно перейматись за значення стовпця <b>Variant</b> і можна перекладати спокійно рядки з текстом.</p>
						<img src="ue/uassetgui-4.png" width="200" style="display: block; margin: 0 auto;" alt="">
					<p style="text-indent: 1em;">Такі <b>.json</b> файли також можна розпарсити та перекладати в <b>.csv</b>, але це робиться індивідуально для кожної гри, немає універсального інструменту, його потрібно писати власноруч, за допомогою ШІ, просити знайомих техніків або людей на дискорд серверах.</p>
					<p style="text-indent: 1em;">Після перекладу <b>.json</b> потрібно повернути в <b>.uasset</b> формат, для цього відкрийте його через <b>UAssetGUI</b> та натисніть <b>Save</b>, сформується <b>.uasset+.uexp</b> для імпорту в гру, впевніться, що назви файлів ідентичні з оригіналами з гри.</p>
						<img src="ue/uassetgui-5.png" width="1100" style="display: block; margin: 0 auto;" alt="">
				<h3 id="ue-font">Заміна шрифтів</h3>
					<p>Коли поряд з <b>.uasset</b> немає файлу<b>.ufont</b>, а ви впевнені, що шрифт усередині <b>.uasset+.uexp</b> — знадобиться авторська програма <b><a target="_blank" href="https://github.com/hikarosato/UAsset-Font-Tool">UAsset Font Tool</a></b>.</p>
					<p>Підтримується заміна <b>.ttf</b> та <b>.swf</b>. Перевірено на <b>Life is Strange 2</b>, <b>Borderlands 3</b> та <b>KINGDOM HEARTS III + Re Mind</b>.</p>
					<p>Приклад заміненого шрифту через програму:</p>
						<div style="display: flex; gap: 10px; justify-content: center; align-items: flex-start; flex-wrap: wrap;">
							<img src="ue/orig_font.png" style="max-width: 600px; height: auto;" alt="">
							<img src="ue/new_font.png" style="max-width: 600px; height: auto;" alt="">
						</div>
				<h3 id="ue-pack">Пакування Zen-контейнерів</h3>
					<p>Для цього нам знову потрібен <b><a target="_blank" href="https://github.com/trumank/retoc">retoc</a></b>.</p>
					<p>Шаблон команди:</p>
					<code>retoc to-zen ТЕКА ФАЙЛ.utoc --version UE*_*</code>
					<p>У моєму випадку з <b>Life is Strange: Double Exposure</b> команда виглядає ось так:</p>
					<code>retoc to-zen Exports pakchunk8-Windows_P.utoc --version UE5_2</code>
						<img src="ue/retoc-pack.png" width="800"  style="display: block; margin: 0 auto;" alt="">
					<p>Результат виконаної роботи:</p>
						<img src="ue/game.png" width="400"  style="display: block; margin: 0 auto;" alt="">
				<h3 id="ue-unoff-uk">Неофіційна українська мова</h3>
					<p style="text-indent: 1em;">У <b><a target="_blank" href="https://medium.com/@hikaro/%D0%B4%D0%BE%D0%B4%D0%B0%D0%B2%D0%B0%D0%BD%D0%BD%D1%8F-%D1%83%D0%BA%D1%80%D0%B0%D1%97%D0%BD%D1%81%D1%8C%D0%BA%D0%BE%D1%97-%D1%8F%D0%BA-%D0%BE%D0%BA%D1%80%D0%B5%D0%BC%D0%BE%D1%97-%D0%BC%D0%BE%D0%B2%D0%B8-%D0%B2-%D1%96%D0%B3%D1%80%D0%B8-%D0%BD%D0%B0-unreal-engine-4-5-120d44c73d3f">даній</a></b> статті я описав метод можливого додавання української як окремої мови, зауважу, не всюди таке спрацює, якщо маєте бажання, можете спробувати на своїй грі.</p>
				<hr>
			<h2 id="tips">Поради</h2>
				<p>Для перекладу тексту та порівняння з оригіналом зручно використовувати <b>ExamDiff</b>, саме <b>Pro</b> версію, яка підтримує усі <b>compare-функції</b>.</p>
					<img src="tips/examdiff.png" width="1200" style="display: block; margin: 0 auto;" alt="">
				<p>Для вводу символів <b>… — – « » ’ °</b> зручно використовувати авторські <b><a target="_blank" href="https://github.com/hikarosato/hikaro_hotkeys">швидкі клавіші на AutoHotkey</a></b> (Тільки для <b>Windows</b>).</p>
			<hr>
		</main>
	</div>
<footer>Made by Hikaro</footer>
<script>
	document.querySelectorAll('.menu-link').forEach(link => {
		link.addEventListener('click', e => {
			const parent = e.target.parentElement;
			parent.classList.toggle('open');
		});
	});
</script>
</body>
</html>
